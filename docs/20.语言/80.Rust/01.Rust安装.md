---
title: Rustå®‰è£…
date: 2024-02-26 11:07:51
permalink: /language/rust/22f3a6/
categories:
  - è¯­è¨€
  - Rust
tags:
  - Rust
  - Rustå®‰è£…
  - ä¸å™¨
  - ä¸å™¨å°çª
---

## å‰è¨€

åœ¨ä½¿ç”¨ `golang` å†™ç²˜è´´æ¿çš„æ—¶å€™ï¼Œå‘ç° `golang` çš„åº•å±‚åº“å®åœ¨æ˜¯å¤ªè¿‡äºè‰¯è ä¸é½ï¼Œå¦å¤– `golang` å­¦çš„ä¹Ÿä¸æ˜¯å¾ˆç²¾é€šï¼Œæƒ³åšæ¡Œé¢ç«¯çš„æ—¶å€™ `wails v3` ä¹Ÿæ˜¯è¿›å±•ç¼“æ…¢ï¼Œåªå¥½åœ¨è¿™ä¸ªç©ºé—²æ—¶é—´æ¥çœ‹çœ‹ `Rust`ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œé¢„å…ˆç”¨ä¹‹ï¼Œå¿…å…ˆè£…ä¹‹ã€‚

å“¦ï¼Œå¯¹äº†ï¼Œå­¦ä¹ çš„èµ„æ–™ç”¨çš„æ˜¯ï¼š[Rustè¯­è¨€åœ£ç»(Rust Course)](https://course.rs/about-book.html)

å› ä¸º `wails v3` åº“ä¸å¥½ç”¨ï¼Œå»å­¦ä¹  `Rust` æ€»æœ‰ç§ä¸ºäº†ä¸€ç¢—é†‹è€ŒåŒ…äº†ä¸€é¡¿é¥ºå­çš„æ„Ÿè§‰ ğŸ˜‚

<!-- more -->

<InArticleAdsense
    data-ad-client="ca-pub-1725717718088510"
    data-ad-slot="4281148213">
</InArticleAdsense>

## å®‰è£…

### `Linux`ã€`macOS`

ç›´æ¥è¿è¡Œ

``` shell
curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
# è¾“å…¥å®Œä¸Šé¢ä»£ç åæ˜¾ç¤ºçš„å†…å®¹è¯¦æƒ…è§ Windows å®‰è£… Rust
```

> è¿™ä¸ªå‘½ä»¤å°†ä¸‹è½½ä¸€ä¸ªè„šæœ¬å¹¶å¼€å§‹å®‰è£… `rustup` å·¥å…·ï¼Œæ­¤å·¥å…·å°†å®‰è£… `Rust` çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ã€‚å¯èƒ½ä¼šæç¤ºä½ è¾“å…¥ç®¡ç†å‘˜å¯†ç ã€‚
> å¦‚æœå®‰è£…æˆåŠŸï¼Œä¼šæç¤º `Rust is installed now. Great!`

æˆ‘å®‰è£…å®Œæˆåå°±ç›´æ¥é‡æ–°å¼€äº†ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œè¿è¡Œäº† `cargo -V` å’Œ `rustc -V` éƒ½æ­£å¸¸äº†ï¼Œæç¤ºåé¢çš„ä¸€ä¸ªç¯å¢ƒå˜é‡æ²¡æœ‰æ‰§è¡Œ

#### å®‰è£… `C` è¯­è¨€ç¼–è¯‘å™¨ï¼šï¼ˆéå¿…éœ€ï¼‰

- `macOS`
  - `xcode-select --install`
- `Linux`
  - æŒ‰ç…§ç›¸åº”å‘è¡Œç‰ˆçš„æ–‡æ¡£æ¥å®‰è£… `GCC` æˆ– `Clang`

### `Windows`

> å› æˆ‘çš„ç¯å¢ƒæ˜¯ `macOS` æ‰€ä»¥ä»¥ä¸‹å®‰è£…æ–¹å¼æ²¡æœ‰éªŒè¯ï¼Œè‡ªè¡ŒéªŒè¯

> `Windows` ç¯å¢ƒä¸‹å¿…é¡»è¦ `C++` ç¯å¢ƒ

ä¸‹é¢ä¸ºä¸¤ç§å®‰è£…æ–¹å¼

#### `x86_64-pc-windows-msvc`ï¼ˆå®˜æ–¹æ¨èï¼‰

å…ˆå®‰è£… [Microsoft C++ Build Tools](https://visualstudio.microsoft.com/zh-hans/visual-cpp-build-tools/)ï¼Œå‹¾é€‰å®‰è£… `C++` ç¯å¢ƒå³å¯ã€‚å®‰è£…æ—¶å¯è‡ªè¡Œä¿®æ”¹ç¼“å­˜è·¯å¾„ä¸å®‰è£…è·¯å¾„ï¼Œé¿å…å ç”¨è¿‡å¤š `C` ç›˜ç©ºé—´ã€‚å®‰è£…å®Œæˆåï¼Œ`Rust` æ‰€éœ€çš„ `msvc` å‘½ä»¤è¡Œç¨‹åºéœ€è¦æ‰‹åŠ¨æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œå¦åˆ™å®‰è£… `Rust` æ—¶ `rustup-init` ä¼šæç¤ºæœªå®‰è£… `Microsoft C++ Build Tools`ï¼Œå…¶ä½äºï¼š`%Visual Studio` å®‰è£…ä½ç½®`%\VC\Tools\MSVC\%version%\bin\Hostx64\x64`ï¼ˆè¯·è‡ªè¡Œæ›¿æ¢å…¶ä¸­çš„ `%Visual Studio` å®‰è£…ä½ç½®`%`ã€`%version%` å­—æ®µï¼‰ä¸‹ã€‚

å¦‚æœä½ ä¸æƒ³è¿™ä¹ˆåšï¼Œå¯ä»¥é€‰æ‹©å®‰è£… `Microsoft C++ Build Tools` æ–°å¢çš„â€œå®šåˆ¶â€ç»ˆç«¯ `Developer Command Prompt for %Visual Studio version%` æˆ– `Developer PowerShell for %Visual Studio version%`ï¼Œåœ¨å…¶ä¸­è¿è¡Œ `rustup-init.exe`ã€‚

å‡†å¤‡å¥½ `C++` ç¯å¢ƒåå¼€å§‹å®‰è£… `Rust`ï¼š

åœ¨ [RUSTUP-INIT](https://www.rust-lang.org/learn/get-started) ä¸‹è½½ç³»ç»Ÿç›¸å¯¹åº”çš„ `Rust` å®‰è£…ç¨‹åºï¼Œä¸€è·¯é»˜è®¤å³å¯ã€‚

``` shell
PS C:\Users\Hehongyuan> rustup-init.exe
......
Current installation options:

   default host triple: x86_64-pc-windows-msvc
     default toolchain: stable (default)
               profile: default
  modify PATH variable: yes

1) Proceed with installation (default)
2) Customize installation
3) Cancel installation
```

#### `x86_64-pc-windows-gnu`

ç›¸æ¯”äº `MSVC` ç‰ˆæœ¬æ¥è¯´ï¼Œ`GNU` ç‰ˆæœ¬å…·æœ‰æ›´è½»é‡ï¼Œæ›´é è¿‘ `Linux` çš„ä¼˜åŠ¿ã€‚

é¦–å…ˆï¼Œæ ¹æ® [MSYS2](https://www.msys2.org/) å®˜ç½‘ é…ç½® `MSYS`ã€‚

åœ¨å®‰è£… `mingw-toolchain` åï¼Œè¯·å°† `%MSYS å®‰è£…è·¯å¾„%\mingw64\bin` æ·»åŠ åˆ°ç³»ç»Ÿå˜é‡ `PATH` ä¸­ã€‚

é…ç½®å¥½åï¼Œåœ¨ `MSYS` ä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£… `rustup`ã€‚

``` shell
$ curl https://sh.rustup.rs -sSf | sh
```

ä¹‹åï¼Œæ ¹æ®ä»¥ä¸‹è¾“å‡ºè¿›è¡Œé…ç½®ã€‚

``` shell
Current installation options:

   default host triple: x86_64-pc-windows-msvc
     default toolchain: stable (default)
               profile: default
  modify PATH variable: yes

1) Proceed with installation (default)
2) Customize installation
3) Cancel installation
>2

I'm going to ask you the value of each of these installation options.
You may simply press the Enter key to leave unchanged.

Default host triple? [x86_64-pc-windows-msvc]
x86_64-pc-windows-gnu

Default toolchain? (stable/beta/nightly/none) [stable]
stable

Profile (which tools and data to install)? (minimal/default/complete) [default]
complete

Modify PATH variable? (Y/n)
Y

Current installation options:

   default host triple: x86_64-pc-windows-gnu
     default toolchain: stable
               profile: complete
  modify PATH variable: yes

1) Proceed with installation (default)
2) Customize installation
3) Cancel installation
>
```

å†ä¹‹åï¼ŒæŒ‰ä¸‹ `1`ï¼Œç­‰å¾…ã€‚å®Œæˆåï¼Œæ‚¨å°±å·²ç»å®‰è£…äº† `Rust` å’Œ `rustup`ã€‚

## ä¸º `cargo` å’Œ `rustup` è®¾ç½®æº

> æœ¬æ–‡æ›¿æ¢ä¸º[å­—èŠ‚è·³åŠ¨]æºï¼Œå‚è€ƒåœ°å€[Rust crates.io ç´¢å¼•](https://course.rs/first-try/slowly-downloading.html#å­—èŠ‚è·³åŠ¨)

::: note
åŸæœ¬æƒ³ä½¿ç”¨æ¸…åæºçš„ï¼Œä½†æ˜¯æ‰“å¼€ `RustRover` ç¼–è¾‘å™¨ååœ°æ­¥ä¸€ç›´åœ¨æç¤º `download` ä¸­ï¼Œå¹¶ä¸” `main` å‡½æ•°ä¹Ÿæ— æ³•è¿è¡Œï¼Œæ¯”è¾ƒè€½è¯¯æ—¶é—´ï¼Œæ‰€ä»¥æ›¿æ¢ä¸ºå­—èŠ‚è·³åŠ¨çš„æºäº†
:::

``` shell
vi ~/.cargo/config

# è¿›å…¥ç¼–è¾‘å™¨åç²˜è´´ä¸‹é¢çš„ä¿¡æ¯
[source.crates-io]
replace-with = 'rsproxy'

[source.rsproxy]
registry = "https://rsproxy.cn/crates.io-index"

# ç¨€ç–ç´¢å¼•ï¼Œè¦æ±‚ cargo >= 1.68
[source.rsproxy-sparse]
registry = "sparse+https://rsproxy.cn/index/"

[registries.rsproxy]
index = "https://rsproxy.cn/crates.io-index"

[net]
git-fetch-with-cli = true
```
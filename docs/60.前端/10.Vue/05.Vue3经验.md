---
title: Vue3ç»éªŒ
date: 2022-11-21 13:55:21
permalink: /front/vue/ba496f/
categories:
  - å‰ç«¯
  - Vue
tags:
  - Vue3
  - ç»éªŒ
  - è·¯å¾„ä½¿ç”¨@
  - axiosè·¨åŸŸ
---

## å‰è¨€

æ‚ä¸ƒæ‚å…«çš„å°æŠ€å·§å¤ªç‰¹ä¹ˆå¤šäº†ï¼Œå°±ä¸€ç¯‡æ–‡ç« å¤šå¤šè®°å½•å§ğŸ¶

<!-- more -->

## `Vue3+Vite`é…ç½®è·¯å¾„ä½¿ç”¨åˆ«å`@`

1. å®‰è£…`@types/node`
    ``` shell
    # å®‰è£…@types/node
    npm install @types/node --save-dev
    ```

2. ä¿®æ”¹`vite.config.js`ï¼Œä¹Ÿä¸çŸ¥é“å’‹æè¿°ï¼Œå¯¹ç€ä¸‹é¢çš„æŠ„å§ï¼Œæˆ‘æ˜¯æ–°æ‰‹å®‰å¿ƒé£Ÿç”¨
    ``` js
    import { defineConfig } from "vite";
    import vue from "@vitejs/plugin-vue";
    // ğŸ‘‡è¿™æ˜¯æ–°å¢çš„
    import path from "path"; //è¿™ä¸ªpathç”¨åˆ°äº†ä¸Šé¢å®‰è£…çš„@types/node

    export default defineConfig({
        plugins: [vue()],
        // ğŸ‘‡è¿™æ˜¯æ–°å¢çš„
        resolve: {
            alias: {
            '@': path.resolve('./src') // @ä»£æ›¿src
            }
        }
    })
    ```

## `Vue3+Vite`å…¨å±€ä½¿ç”¨`axios`ï¼Œè§£å†³`axios`è·¨åŸŸé—®é¢˜

1. å®‰è£…`axios`

    ``` shell
        npm i axios --save
    ```

2. åœ¨`main.js`ä¸­å¼•å…¥`axios`

    ``` shell
        import { createApp } from "vue";
        import App from "./App.vue";
        // ğŸ‘†çš„ä¸ç”¨ç®¡
        // å¼•å…¥axios
        import axios from "axios";

        const app = createApp(App);

        app.config.globalProperties.$http = axios;
        app.mount("#app");
    ```

3. ã€è§£å†³è·¨åŸŸã€‘ä¿®æ”¹`vite.config.js`

    ``` js
        import { defineConfig } from "vite";
        import vue from "@vitejs/plugin-vue";

        // https://vitejs.dev/config/
        export default defineConfig({
        plugins: [vue()],
        server: {
            proxy: {
                <!-- æ­¤å¤„çš„/apiæ˜¯å–çš„åˆ«åï¼Œç­‰åŒä¸ä¸‹é¢çš„targetè·¯å¾„ï¼Œåœ¨å®é™…ä¸­ä½¿ç”¨çš„ä½¿ç”¨/api/ -->
                "/api": {
                    target: "http://127.0.0.1:8088/test/api", //å®é™…è¯·æ±‚åœ°å€
                    <!-- è¿™é‡Œç®—æ˜¯å¤„ç†è·¨åŸŸçš„æ ¸å¿ƒ -->
                    changeOrigin: true,
                    rewrite: (path) => path.replace(/^\/api/, ""),
                },
            },
        },
        });
    ```

4. ä½¿ç”¨

    ``` js
        <!-- æˆ‘æœåŠ¡ç«¯çš„å®é™…è·¯å¾„ä¸º http://127.0.0.1:8088/test/api/general/getUser -->
        import { getCurrentInstance } from "vue";
        function getOrderList() {
            // ä¸´æ—¶é»˜è®¤ä¸º1000004
            proxy.$http.get("/api/general/getUser").then((response) => {
                console.log(response);
            });
        }
    ```

## ä½¿ç”¨`<script setup>`æ—¶å¦‚ä½•ä½¿ç”¨`onMounted`

``` javascript
<script setup>
import {onMounted} from "vue"

function GNews() {
  console.log("1111")
}

onMounted(()=>{
  GNews()
})
</script>
```